<p id="notice"><%= notice %></p>

<p id="course-title">

  <%= @course.title%>
</p>
  <section id="options" class="clearfix combo-filters">

    <div class="option-combo unit">
      <h4>Unit</h4>
      <ul class="filter option-set clearfix" data-filter-group="unit">
        <li><a href="#" data-filter-value="" class="selected">All Units</a></li>
        <% @course.unit_list.each do |u| %>
          <li><a href="#" data-filter-value=".<%= u %>"><%= u.upcase %></a></li>
        <% end %> 
      </ul>
    </div>

    <div class="option-combo level">
      <h4>Level</h4>
      <ul class="filter option-set clearfix" data-filter-group="level">
        <li><a href="#" data-filter-value="" class="selected">All Levels</a></li>
        <% Resource::LEVELS.each do |l| %>
          <li><a href="#" data-filter-value=".<%= l %>"><%= l.upcase %></a></li>
        <% end %> 
      </ul>
    </div>

    <div class="option-combo rtype">
      <h4>Resource Type</h4>
      <ul class="filter option-set clearfix" data-filter-group="rtype">
        <li><a href="#" data-filter-value="" class="selected">All Resource Types</a></li>
        <% Resource::RESOURCE_TYPES.each do |rt| %>
          <li><a href="#" data-filter-value=".<%= rt %>"><%= rt.upcase %></a></li>
        <% end %> 
      </ul>
    </div>

  <div id="new-resource-btn">
    <button>Add Resource</button>
  </div>
  
  </section>

    <div id="container" class="clearfix">
    <% @course.resources_tagged_with_units.each do |r| %>
      <% categories = r.unit_list.join(" ") %> 
      <% levels = r.level_list.join(" ") %> 
      <% rtypes = r.resource_type_list.join(" ") %>
      <div class="unit-level <%= categories %> <%= levels %> <%= rtypes %>">
        <%= link_to r.name, r.link, :target => '_blank' %>
      </div>
    <% end  %>
    </div>
</div>



  <div class="resource-form">
    <%= form_for(@resource) do |f| %>
      <% if @resource.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@resource.errors.count, "error") %> prohibited this resource from being saved:</h2>

          <ul>
          <% @resource.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
    <% end %>


    <div class="field">
      <%= f.label :name %><br>
      <%= f.text_field :name %>
    </div>
    <div class="field">
      <%= f.label :provider %><br>
      <%= f.text_area :provider %>
    </div>
    <div class="field">
      <%= f.label :link %><br>
      <%= f.text_area :link %>
    </div>
    <div class="field">
      <%= f.label :duration %><br>
      <%= f.number_field :duration %>
    </div>

    <div class="field">
      <%= f.label :unit_list, "Units Available" %><br>
      <%= f.select :unit_list, options_for_select(@course.unit_list), {}, {:multiple => true} %>
    </div>
    <div class="field">
      <%= f.label :level_list, "Levels" %><br>
      <%= f.select :level_list, options_for_select(["Intro", "Intermediate", "Advanced"]), {}, {:multiple => true} %>
    </div>
    <div class="field">
      <%= f.label :resource_type_list, "Resource Type (separated by commas)" %><br>
      <%= f.select :resource_type_list, options_for_select(["Tutorial", "Video", "Document", "Miscelaneous"]), {}, {:multiple => true} %>
    </div>
      <div class="field">
      <%= f.label :cost_list, "Free or Paid" %><br>
       <%= f.select :cost_list, options_for_select(["Free", "Paid"]), {}, {:multiple => false} %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  </div>  
  <% end %>
</div>

<%= link_to 'Edit', edit_course_path(@course) %> |
<%= link_to 'Back', courses_path %>
